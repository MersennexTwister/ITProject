# PROJECT HARM

HARM - Handheld Automatic Rating SysteM - переносная системы автоматического выставления оценок при помощи CV

**Программная** часть проекта состоит из трех основных модулей:
  - **FaceRec** - отвечает за распознавания лиц (библиотеки OpenCV, face_recognition)
  - **Spreadsheet** - работа с Google-таблицей (API GoogleSheets)
  - **Interlayer** - промежуточный слой между FaceRec и Spreadsheet. Основная задача - при отсутсвии интернт-соединения
сохранять данные оценки локально, и затем при наличии интерет-соединения отправляет все локальные данные в сеть.

**Аппаратная** состоит из Raspberry Pi 3 и камеры.

# Программная часть

### FaceRec

Вся работа по распознаванию лиц идёт в классе FaceRec

В нём 3 функции:   
```
  startWork() # начинает работу (перезагрузка системы). Нужно запускать после изменения директории с учениками.
  
  recogniteTheFace() # делает скрин с камеры и распознаёт лица на нём.Результат передаётся в функцию getGoodFace()
                     
  getGoodFace() # находит среди лиц наиболее близкое к центру, 
                # чтобы повысить вероятность выставления оценки нужному человеку
```

Ещё 2 вещи:
 - У класса FaceRec есть параметр - workPath. Это путь к директории с лицами.
	
 - Есть функция clearFile(), которая очищает файл с encoding-ами после каждого перезапуска системы, дабы не захламлять память.

### Spreadsheet

Вся работа по отправке данных в Google-таблицу происходит здесь

Функции:
```
  __init__() # запускается в начале работы; проверяет таблицу на соответствие шаблону и при необходимости восстанавливает
  
  put_mark(date, id) # отправляет оценку соответсвующему ученику (по его id) на
  соответствующую дату в таблицу
```

По сути, взаимодействие с Spreadsheet осуществлется с помощью модуля Interlayer - именно в объекте класса Interlayer создается объект класса Spreadsheet

### Interlayer

Промежуточный слой между FaceRec и Spreadsheet

Функции:
```
  put_mark(date, id) # если есть Интернет, отправляет данные сразу в таблицу (Spreadsheet.put_mark())
  если Интернета нет, сохраняет данные локально; при след.подключении выгружает все локальные данные в сеть
```

# Аппаратная часть

### Raspberry Pi
